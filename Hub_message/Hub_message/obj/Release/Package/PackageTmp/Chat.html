<!DOCTYPE html>
<html ng-app="messageBox">
<head>
    <title>Chat SignalR Simples</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./Scripts/toaster.css" rel="stylesheet" />
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }

       [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x- ng-cloak {
            display: none !important;
        }
    </style>

</head>
<body ng-controller="messageController">
    <toaster-container toaster-options="{'time-out': 3000}"></toaster-container>
    <div class="container" ng-cloak>
        
        <div ng-show="!escolheuGrupo">
            <span>Grupo:</span><select ng-model="grupo">
                <option value="GrupoA">Grupo A</option>
                <option value="GrupoB">Grupo B</option>
            </select>
            <span>Nome:</span><input ng-model="nome" type="text"/>
           
            <input type="button" value="Entar" ng-click="entrar()" />
        </div>
      
        <div ng-show="escolheuGrupo">
            <span>Olá {{nome}} ! Você está no Chat do Grupo : {{grupo}}</span>
            <br />
            <input type="text" id="mensagem" ng-model="mensagem" />
            <input type="button" id="enviamensagem" value="Send" ng-click="sendMessage()" />
            <input type="hidden" ng-model="nome" id="exibenome" />
            <ul id="discussion" ng-repeat="item in messages" ng-cloak>
                <li>
                    <strong>
                        {{item.nome}}
                    </strong>:&nbsp;&nbsp;{{item.mensagem}}
                </li>
            </ul>
        </div>
    </div>

    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="./Scripts/jquery-1.10.2.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="./Scripts/jquery.signalR-2.1.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="./Scripts/angular.js"></script>
    <script src="./Scripts/toaster.js"></script>
    <script src="App.js"></script>

    <!--Add script to update the page and send messages.-->



    <script type="text/javascript">

/*
        $(function () {
            // Declar um proxy para referenciar o  hub.
            var chat = $.connection.chatHub;
            // Cria a função que o run pode chamar para mensagens de broadcast

            chat.client.broadcastMessage = function (nome, mensagem) {
                // Html encode exibe o nome e mensagem
                var encodednome = $('<div />').text(nome).html();
                var encodedMsg = $('<div />').text(mensagem).html();
                // Adiciona a mensagem na pagina
                $('#discussion').append('<li><strong>' + encodednome
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            };
            // Pega o nome do usuário e armazena
            $('#exibenome').val(prompt('Informe o seu nome :', ''));
            // Define o focus inicial para a caixa de mensagem
            $('#mensagem').focus();
            // Inicia a conexão
            $.connection.hub.start().done(function () {

                $('#enviamensagem').click(function () {
                    // Chama o método Send no  hub.
                    chat.server.send($('#exibenome').val(), $('#mensagem').val());
                    // Limpa o textbox e reseta o focus para o proximo comentario
                    $('#mensagem').val('').focus();
                });
            });
        });*/
    </script>
</body>

</html>